
<!DOCTYPE html>
<html lang="en-us">













<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta property="og:title" content="A Data Engineer&#39;s Guide To Non-Traditional Data Storages · Andrew Goss · Data Engineering &amp; Analytics" />
    <meta name="twitter:title" content="A Data Engineer&#39;s Guide To Non-Traditional Data Storages · Andrew Goss · Data Engineering &amp; Analytics" />
    <title>A Data Engineer&#39;s Guide To Non-Traditional Data Storages · Andrew Goss · Data Engineering &amp; Analytics</title>

    <meta property="og:site_name" content="Andrew Goss · Data Engineering &amp; Analytics" />
    <meta property="og:locale " content="en-us" />

    <meta property="og:url" content="https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/" />
    <meta name="twitter:url" content="https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/" />
    <link rel="canonical" href="https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/" />

    <meta name="description" content="For data engineers, the most important aspects of data storages are how they index, shard, and aggregate data.
 This post originally appeared on Toptal and was written by Ken Hu.
Data Engineering With the rise of big data and data science, many engineering roles are being challenged and expanded. One new-age role is data engineering.
Originally, the purpose of data engineering was the loading of external data sources and the designing of databases (designing and developing pipelines to collect, manipulate, store, and analyze data)." />
    <meta name="twitter:description" content="For data engineers, the most important aspects of data storages are how they index, shard, and aggregate data.
 This post originally appeared on Toptal and was written by Ken Hu.
Data Engineering With the rise of big data and data science, many engineering roles are being challenged and expanded. One new-age role is data engineering.
Originally, the purpose of data engineering was the loading of external data sources and the designing of databases (designing and developing pipelines to collect, manipulate, store, and analyze data)." />
    <meta property="og:description" content="For data engineers, the most important aspects of data storages are how they index, shard, and aggregate data.
 This post originally appeared on Toptal and was written by Ken Hu.
Data Engineering With the rise of big data and data science, many engineering roles are being challenged and expanded. One new-age role is data engineering.
Originally, the purpose of data engineering was the loading of external data sources and the designing of databases (designing and developing pipelines to collect, manipulate, store, and analyze data)." />

    <meta name="twitter:site" content="@Andrewrgoss" />
    <meta name="twitter:creator" content="@Andrewrgoss" />

    

    
    <meta name="twitter:card" content="summary" />
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="Sep 2018" />
    <meta property="og:article:section" content="post" />
    <meta property="og:article:author" content="https://andrewrgoss.com/about/" />

    <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "BlogPosting",
                "headline": "A Data Engineer&#39;s Guide To Non-Traditional Data Storages",
                "name": "A Data Engineer&#39;s Guide To Non-Traditional Data Storages",
                "author": {
                    "@type": "Person",
"name": "Andrew Goss",
"email": "admin@andrewrgoss.com",
"url": "https://andrewrgoss.com/",
"sameAs":
	[
		"https://twitter.com/andrewrgoss",
		"https://linkedin.com/in/andrewrgoss",
		"https://github.com/andrewrgoss"
	]
                },
                "datePublished": "Sep 2018",
                "description": "For data engineers, the most important aspects of data storages are how they index, shard, and aggregate data.
 This post originally appeared on Toptal and was written by Ken Hu.
Data Engineering With the rise of big data and data science, many engineering roles are being challenged and expanded. One new-age role is data engineering.
Originally, the purpose of data engineering was the loading of external data sources and the designing of databases (designing and developing pipelines to collect, manipulate, store, and analyze data).",
                "wordCount": 1837,
                "articleSection": "post",
                "timeRequired": "0:9:0",
                "url": "https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/"
            }
        </script>

    

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="57x57" href="https://andrewrgoss.com/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://andrewrgoss.com/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://andrewrgoss.com/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://andrewrgoss.com/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://andrewrgoss.com/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://andrewrgoss.com/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://andrewrgoss.com/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://andrewrgoss.com/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://andrewrgoss.com/icons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://andrewrgoss.com/icons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://andrewrgoss.com/icons/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="https://andrewrgoss.com/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://andrewrgoss.com/icons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://andrewrgoss.com/icons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://andrewrgoss.com/icons/manifest.json">
    <link rel="shortcut icon" href="https://andrewrgoss.com/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="andrewrgoss.com">
    <meta name="application-name" content="andrewrgoss.com">
    <meta name="msapplication-TileColor" content="#2c3e50">
    <meta name="msapplication-TileImage" content="https://andrewrgoss.com/icons/mstile-144x144.png">
    <meta name="msapplication-config" content="https://andrewrgoss.com/icons/browserconfig.xml">
    <meta name="theme-color" content="#2c3e50">

    
    

    <style>
*
{
	padding: 0;
	margin: 0;
}

body,html
{
	font-size: 1em;
	line-height: 1.65em;
	font-family: "Lato",sans-serif;
	font-weight: 400;
}

br.custom {
	display: block;
   	margin: 1em 0;
	content: " ";
}

html
{
	height: 100%;
}

body
{
	padding: 1em 2.5em 1em 15.9em;
}

header
{
	border-right: 1px #bdc3c7 solid;
	padding: 2em;
	position: fixed;
	top: 0;
	left: 0;
	height: 100%;
	width: 9.2em;
	background-color: #2c3e50;
	color: #ecf0f1;
}

#content
{
	display: block;
	width: 100%;
}

footer
{
	padding: 1em 0 1em;
	font-size: .8em;
	line-height: 1.5em;
	color: #95a5a6;
}

article
{
	border-bottom: .1em #bdc3c7 solid;
	padding-bottom: 1.7em;
	max-width: 56em;
}

h4,h5,h6,hr,p
{
	margin-top: .6em;
	margin-bottom: .1em;
}

p.custom_blockquote
{
	margin-top: 0em;
	margin-bottom: 0em;
	font-weight: 500;
	line-height: 1em;
	font-size: .9em;
	color: #7f8c8d;
	padding-bottom: .3em;
}

h1,h2,h3,h4,h5,h6
{
	font-family: "Oswald","Lato",sans-serif;
	font-weight: 400!important;
}

h1
{
	font-size: 2.5em;
	line-height: 1.1em;
	margin-top: .5em;
	margin-bottom: .6em;
}

h2
{
	font-size: 1.9em;
	line-height: 1.2em;
	margin-top: .7em;
	margin-bottom: .7em;
}

h3
{
	font-size: 1.4em;
	line-height: 1.3em;
	margin-top: .8em;
	margin-bottom: .8em;
}

h4
{
	font-size: 1.3em;
}

h5
{
	font-size: 1.2em;
}

h6
{
	font-size: 1.1em;
}

iframe,img
{
	max-width: 100%;
}

a
{
	font-weight: 700;
	text-decoration: none;
	color: #e74c3c;
}

a:hover
{
	color: #23C2F8;
}

h1 a,h2 a,h3 a,h4 a,h5 a,h6 a
{
	font-weight: 400;
}

strong
{
	font-weight: 700;
}

blockquote
{
	border-left: .4em solid #bdc3c7;
	padding-left: 1.2em;
	font-size: 1.3em;
}

hr
{
	border: 0;
	height: 1px;
	background: #bdc3c7;
}

ol,ul
{
	margin-left: 2em;
}

code
{
	font-size: 1.2em;
	background: #bdc3c7;
}

pre
{
	font-size: .8em;
	line-height: 2em;
	background: #bdc3c7;
	word-break: break-all;
	word-wrap: break-word;
	white-space: pre;
	white-space: -moz-pre-wrap;
	white-space: pre-wrap;
}

input
{
	font-size: 1em;
	padding: .3em;
}

header h1
{
	font-size: 1.9em;
	margin-top: .3em;
	margin-bottom: .2em;
}

header a
{
	color: #1abc9c;
}

header h1 a:hover
{
	text-decoration: none;
}

header #logo img
{
	width: 8em;
	height: 8em;
	border-radius: 4em;
	-moz-border-radius: 4em;
	-webkit-border-radius: 4em;
	border: 0;
}

#follow-icons
{
	font-size: .7em;
	margin-top: -1.8em;
	margin-bottom: 0.7em;
}

#follow-icons a
{
	color: #ccc;
	margin-right: 0.5em;
}

#follow-icons a:hover
{
	color: #23C2F8;
}

#follow-icons span
{
	vertical-align: top;
	margin-left: -.15em;
	margin-right: -.15em;
}

#follow-icons span .fa-stack-1x
{
	font-size: 1.05em;
	line-height: 1.9em;
}

header h6
{
	margin-top: .4em;
	margin-bottom: .35em;
}

header span
{
	color: #cccccc;
	font-size: .68em
}

article span.post-stamp
{
	color: #888;
}

h1.post-title
{
	margin-top: .35em;
	margin-bottom: .6em;
}

h3.post-title
{
	margin-top: .4em;
	padding-bottom: .9em;
	border-bottom: 1px solid #bdc3c7;
	font-size: 1.2em;
	color: #34495e;
	font-family: "Lato",sans-serif;
	font-weight: 700!important;
}

h3.book
{
	margin-top: .1em;
	padding-bottom: .6em;
	border-bottom: 1px solid #bdc3c7;
	font-size: 1.2em;
	color: #34495e;
	font-family: "Lato",sans-serif;
	font-weight: 700!important;
}

h3.book>time
{
	font-family: "Lato",sans-serif;
	font-weight: 300!important;
	font-size: .9em;
}

h3.book>author
{
	font-family: "Lato",sans-serif;
	font-weight: 700!important;
	font-size: .7em;
	color: #cccccc;
}

.sitetaglist
{
	list-style-type: none;
	display: block;
	margin-left: 0;
	text-align: center;
	margin-bottom: 1.25em;
	font-size: 0.8em;
}

.sitetaglist li
{
	display: inline;
}

.sitetaglisttitle
{
	margin-bottom: .3em;
}

h3.post-title>time
{
	font-family: "Lato",sans-serif;
	font-weight: 300!important;
	font-size: .9em;
}

.post-title .feature-star
{
	font-size: .9em;
}

.feature-star,.separator
{
	color: #ccc;
}

.taglist { color: #ccc }

.taglist a {
    background-color: #b3b3b3;
    color: #fff;
    display: inline-block;
    line-height: 1.5em;
    padding: .3em .6em;
    vertical-align: 20%;
    font-size: .5em;
    font-weight: 700!important;
    text-transform: uppercase;
    letter-spacing: .05em;
    border-radius: .25em;
    -moz-border-radius: .25em;
    -webkit-border-radius: .25em;
}

.taglist a:hover {
    background-color: #23C2F8;
}

#social-bar
{
	margin-top: 1.5em;
	background-color: #bdc3c7;
	padding: .3em;
}

.pagination
{
	margin-bottom: 1em;
}

footer a
{
	font-weight: 300;
	color: #95a5a6;
	text-decoration: underline;
}

footer a:hover
{
	color: #7f8c8d;
	text-decoration: none;
}

.uk-search
{
	display: inline-block;
	position: relative;
	margin: 0;
}

.uk-search:before
{
	content: "\f002";
	position: absolute;
	top: 0;
	left: 0;
	width: 1.87em;
	line-height: 2.5em;
	text-align: center;
	font-family: FontAwesome;
	font-size: 0.87em;
	color: #1abc9c;
}

.uk-search-field::-moz-focus-inner
{
	border: 0;
	padding: 0;
}

.uk-search-field::-webkit-search-cancel-button,.uk-search-field::-webkit-search-decoration
{
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
}

.uk-search-field::-ms-clear
{
	display: none;
}

.uk-search-field::-moz-placeholder
{
	opacity: 1;
}

.uk-search-field
{
	font-family: "Oswald","Lato",sans-serif;
	color: #ecf0f1;
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	width: 11.25em;
	height: 1.87em;
	padding: 0 0 0 1.87em;
	border: 0;
	background: rgba(0,0,0,0);
	transition: all linear .2s;
	-o-transition: all linear .2s;
	-moz-transition: all linear .2s;
	-webkit-transition: all linear .2s;
	vertical-align: middle;
}

.uk-search-field:-ms-input-placeholder
{
	color: #95a5a6!important;
}

.uk-search-field::-moz-placeholder
{
	color: #95a5a6;
}

.uk-search-field::-webkit-input-placeholder
{
	color: #95a5a6;
}

.uk-search-field:focus
{
	outline: 0;
}

.uk-search-field:focus,.uk-search.uk-active .uk-search-field
{
	width: 11.25em;
}

.gs-image-box,.gsc-above-wrapper-area,.gsc-cursor-box,.gsc-url-bottom,.gsc-thumbnail,.gs-per-result-labels
{
	display: none!important;
	visibility: hidden!important;
}

.gsc-control-cse,.gsc-results
{
	font: inherit!important;
	background: inherit!important;
	border: inherit!important;
	padding: inherit!important;
	margin: inherit!important;
}

.gsc-result
{
	border: inherit!important;
	background: inherit!important;
	padding: inherit!important;
}

.gs-title
{
	font-family: "Lato",sans-serif!important;
	color: #e74c3c!important;
	text-decoration: none!important;
	height: inherit!important;
	overflow: inherit!important;
}

.gs-snippet
{
	color: inherit!important;
	font-family: "Lato",sans-serif!important;
	height: inherit!important;
	overflow: inherit!important;
}

@media only screen and (min-width:1281px)
{
	body,html
	{
		font-size: 1.1em;
	};
}

@media only screen and (max-width:800px)
{
	body
	{
		padding: 0;
	}

	header
	{
		border-right: 0;
		border-bottom: 1px #bdc3c7 solid;
		position: relative;
		height: auto;
		width: auto;
		text-align: center;
		padding-bottom: 1em;
	}

	#content
	{
		margin-left: 0;
		padding: 2em 2em 1em;
		width: auto;
	}

	footer
	{
		padding: 0 2.5em 2em;
	};
}

@media only screen and (max-width:31.25em)
{
	#content,header
	{
		padding: 1.2em 1.2em .6em;
	}

	footer
	{
		padding: 0 1.5em 1.2em;
	}

	ol,ul
	{
		margin-left: 1em;
	};
}

.section
{
	clear: both;
	padding: 0;
	margin: 0;
}

.col
{
	display: block;
	float: left;
	margin: 1% 0 1% 1.6%;
}

.col:first-child
{
	margin-left: 0;
}

.group:before,.group:after
{
	content: "";
	display: table;
}

.group:after
{
	clear: both;
}

.group
{
	zoom: 1;
}

.span_3_of_3
{
	width: 100%;
}

.span_2_of_3
{
	width: 66.13%;
}

.span_1_of_3
{
	width: 32.26%;
}

@media only screen and (max-width: 480px)
{
	.col
	{
		margin: 1% 0;
	}

	.span_3_of_3,.span_2_of_3,.span_1_of_3
	{
		width: 100%;
	};
}

@media only screen and (max-height: 550px)
{
	.sitetaglist, .sitetaglisttitle
	{
		display: none;
		visibility: hidden;
	}
}

.btn {
  display: inline-block;
  padding: .5rem 1.25rem;
  font-weight: 500;
  color: #fff;
  text-decoration: none;
  text-shadow: 0 -1px 0 rgba(0,0,0,.5);
  background-color: #3072b3;  
  background-repeat: repeat-x;  
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #599bdc), color-stop(100%, #3072b3));  
  background-image: -webkit-linear-gradient(top, #599bdc 0, #3072b3 100%);  
  background-image: -moz-linear-gradient(top, #599bdc 0, #3072b3 100%);  
  background-image: -ms-linear-gradient(top, #599bdc 0, #3072b3 100%);  
  background-image: -o-linear-gradient(top, #599bdc 0, #3072b3 100%);  
  background-image: linear-gradient(top, #599bdc 0, #3072b3 100%);  
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#599bdc', endColorstr='#3072b3', GradientType=0);  
  border: 1px solid #2967a4;
  border-radius: 6px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.1);
  -webkit-transition: none;
     -moz-transition: none;
       -o-transition: none;
          transition: none;
}
.btn:hover {
  text-decoration: none;
  background-position: 0 -15px;
}
.btn:active {
  background-image: none;
  background-color: #3072b3;  
  box-shadow: inset 0 5px 10px rgba(0,0,0,.125), 0 1px 2px rgba(0,0,0,.2);
}
h2.resources
{
	font-size: 1.9em;
	line-height: 1.2em;
	margin-top: .7em;
	margin-bottom: -0.2em;
}

</style>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0DRHLESCG3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DRHLESCG3');
    </script>

</head>
<body>
<header id="header">
    <a id="logo" href="https://andrewrgoss.com/"><img src="https://andrewrgoss.com/avatar.jpg" alt="Andrew Goss · Data Engineering &amp; Analytics" /></a>
    <h1><a href="https://andrewrgoss.com/">Andrew Goss</a></h1>
    <span>Data Engineering & Analytics</span><br><br>
    <div id="follow-icons">
	<a href="mailto:admin@andrewrgoss.com" target="_blank" rel="me"><i class="fa fa-envelope-square fa-3x"></i></a>
	<a href="https://linkedin.com/in/andrewrgoss" target="_blank" rel="me"><i class="fa fa-linkedin fa-3x"></i></a>
	<a href="https://github.com/andrewrgoss" target="_blank" rel="me"><i class="fa fa-github fa-3x"></i></a>
</div>
    <h6><a rel="prerender" href="https://andrewrgoss.com/about">About</a></h6>
<h6><a href="https://andrewrgoss.com/resume">Resume</a></h6>
<h6><a href="https://andrewrgoss.com/resources">Resources</a></h6>
<h6><a href="https://andrewrgoss.com/tags">Tags</a></h6>
    			<form class="uk-search" action="https://andrewrgoss.com/search/">
                <input class="uk-search-field" id="q" name="q" type="search" placeholder="search..." />
            </form>

</header>
<main id="content">

<article class="post">
    <div class="post-stamp">
        <time datetime="Sep 2018">
            Sep 2018
        </time>
        <span class="taglist">
        
        &middot; 
            
                <a href="https://andrewrgoss.com/tags/data-analysis/">data analysis</a>
            
                <a href="https://andrewrgoss.com/tags/data-engineering/">data engineering</a>
            
        
        </span>
    </div>
    <h1 class="post-title">A Data Engineer&#39;s Guide To Non-Traditional Data Storages</h1>
    

<p><img src="https://uploads.toptal.io/blog/image/121546/toptal-blog-image-1481031425756-abf394348a623799ba8a34a5fa63e165.jpg" width="420"<br></p>

<blockquote>
<p>For data engineers, the most important aspects of data storages are how they index, shard, and aggregate data.</p>
</blockquote>

<p><sub>This post originally appeared on <a href="https://www.toptal.com" target=_>Toptal</a> and was written by <a href="#ken_hu">Ken Hu</a></i>.</sub><hr></p>

<h2 id="data-engineering">Data Engineering</h2>

<p>With the rise of <a href="https://www.toptal.com/big-data" target=_>big data</a> and data science, many engineering roles are being challenged and expanded. One new-age role is <a href="http://blog.udacity.com/2014/12/data-analyst-vs-data-scientist-vs-data-engineer.html" target=_>data engineering</a>.</p>

<p>Originally, the purpose of data engineering was the loading of external data sources and the designing of databases (designing and developing pipelines to collect, manipulate, store, and analyze data).</p>

<p>It has since grown to support the volume and complexity of big data. So data engineering now encapsulates a wide range of skills, from web-crawling, data cleansing, distributed computing, and data storage and retrieval.</p>

<p>For data engineering and data engineers, data storage and retrieval is the critical component of the pipeline together with how the data can be used and analyzed.</p>

<p>In recent times, many new and different data storage technologies have emerged. However, which one is best suited and has the most appropriate features for data engineering?</p>

<p>Most engineers are familiar with SQL databases, such as PostgreSQL, MSSQL, and MySQL, which are structured in relational data tables with row-oriented storage.</p>

<p>Given how ubiquitous these databases are, we won’t discuss them today. Instead, we explore three types of alternative data storages that are growing in popularity and that have introduced different approaches to dealing with data.</p>

<p>Within the context of data engineering, these technologies are search engines, document stores, and columnar stores.</p>

<ul>
<li><b>Search engines</b> excel at text queries. When compared to text matches in SQL databases, such as <code>LIKE</code>, search engines offer higher query capabilities and better performance out of the box.</li>
<li><b>Document stores</b> provide better data schema adaptability than traditional databases. By storing the data as individual document objects, often represented as JSONs, they do not require schema predefining.</li>
<li><b>Columnar stores</b> specialize in single column queries and value aggregations. SQL operations, such as <code>SUM</code> and <code>AVG</code>, are considerably faster in columnar stores, as data of the same column are stored closer together on the hard drive.</li>
</ul>

<p>In this article, we explore all three technologies: <a href="https://www.elastic.co/products/elasticsearch" target=_>Elasticsearch</a> as a search engine, <a href="https://www.mongodb.com" target=_>MongoDB</a> as a document store, and <a href="https://aws.amazon.com/redshift" target=_>Amazon Redshift</a> as a columnar store.</p>

<p>By understanding alternative data storage, we can choose the most suitable one for each situation. To compare these technologies, we’ll examine how they index, shard, and aggregate data. Each data indexing strategy improves certain queries while hindering others. Knowing which queries are used most often can influence which data store to adopt. Sharding, a methodology by which databases divide its data into chunks, determines how the infrastructure will grow as more data is ingested. Choosing one that matches our growth plan and budget is critical. Finally, these technologies each aggregate its data very differently. When we are dealing with gigabytes and terabytes of data, the wrong aggregation strategy can limit the types and performances of reports we can generate.</p>

<p>As data engineers, we must consider all three aspects when evaluating different data storages.</p>

<h2 id="contenders">Contenders</h2>

<h3 id="search-engine-elasticsearch">Search Engine: Elasticsearch</h3>

<p>Elasticsearch quickly gained popularity among its peers for its scalability and ease of integration. Built on top of <a href="https://lucene.apache.org/core" target=_>Apache Lucene</a>, it offers a powerful, out-of-the-box text search and indexing functionality. Aside from the traditional search engine tasks, text search, and exact value queries, Elasticsearch also offers layered aggregation capabilities.</p>

<h3 id="document-store-mongodb">Document Store: MongoDB</h3>

<p>At this point, MongoDB can be considered the go-to NoSQL database. Its ease of use and flexibility quickly earned its popularity. MongoDB supports rich and adaptable querying for digging into complex documents. Often-queried fields can be sped up through indexing, and when aggregating a large chunk of data, MongoDB offers a multi-stage pipeline.</p>

<h3 id="columnar-store-amazon-redshift">Columnar Store: Amazon Redshift</h3>

<p>Alongside the growth of NoSQL’s popularity, columnar databases have also gathered attention, especially for data analytics. By storing data in columns instead of the usual rows, aggregation operations can be executed directly from the disk, greatly increasing performance. A few years ago, Amazon rolled out its hosted service for a columnar store called Redshift.</p>

<h2 id="indexing">Indexing</h2>

<h3 id="elasticsearch-s-indexing-capability">Elasticsearch’s Indexing Capability</h3>

<p>In many ways, search engines are data stores that specialize in indexing texts. While other data stores create indices based on the exact values of the field, search engines allow retrieval with only a fragment of the (usually text) field.</p>

<p>By default, this retrieval is done automatically for every field through analyzers. An analyzer is a module that creates multiple index keys by evaluating the field values and breaking them down into smaller values. For example, a basic analyzer might examine “the quick brown fox jumped over the lazy dog” into words, such as “the,” “quick,” “brown,” “fox” and so on. This method enables users to find the data by searching for fragments within the results, ranked by how many fragments match the same document data. A more sophisticated analyzer could utilize <a href="https://en.wikipedia.org/wiki/Edit_distance" target=_>edit distances</a>, <a href="https://en.wikipedia.org/wiki/N-gram" target=_>n-grams</a>, and filter by <a href="https://en.wikipedia.org/wiki/Stop_words" target=_>stopwords</a>, to build a comprehensive retrieval index.</p>

<h3 id="mongodb-s-indexing-capability">MongoDB’s Indexing Capability</h3>

<p>As a generic data store, MongoDB has a lot of flexibility for indexing data.</p>

<p>Unlike Elasticsearch, it only indexes the <code>_id</code> field by default, and we need to create indices for the commonly queried fields manually.</p>

<p>Compared to Elasticsearch, MongoDB’s text analyzer isn’t as powerful. But it does provide a lot of flexibility with indexing methods, from the compound and geospatial for optimal querying to the TTL and sparse for storage reduction.</p>

<h3 id="redshift-s-indexing-capability">Redshift’s Indexing Capability</h3>

<p>Unlike Elasticsearch, MongoDB, or even traditional databases, including PostgreSQL, Amazon Redshift does not support an indexing method.</p>

<p>Instead, it reduces its query time by maintaining a consistent sorting on the disk.</p>

<p>As users, we can configure an ordered set of column values as the table sort key. With the data sorted on the disk, Redshift can skip an entire block during retrieval if its value falls outside the queried range, heavily boosting performance.</p>

<h2 id="sharding">Sharding</h2>

<h3 id="elasticsearch-s-sharding-capability">Elasticsearch’s Sharding Capability</h3>

<p>Elasticsearch was built on top of Lucene to scale horizontally and be production ready.</p>

<p>Scaling is done by creating multiple Lucene instances (shards) and distributing them across multiple nodes (servers) within a cluster.</p>

<p>By default, each document is routed to its respective shard through its <code>_id</code> field.</p>

<p>During retrieval, the master node sends each shard a copy of the query before finally aggregating and ranking them for output.</p>

<h3 id="mongodb-s-sharding-capability">MongoDB’s Sharding Capability</h3>

<p>Within a MongoDB cluster, there are three types of servers: router, config, and shard.</p>

<p>By scaling the router, servers can accept more requests, but the heavy lifting happens at the shard servers.</p>

<p>As with Elasticsearch, MongoDB documents are routed (by default) via <code>_id</code> to their respective shards. At the query time, the config server notifies the router, which shards the query, and the router server then distributes the query and aggregates the results.</p>

<h3 id="redshift-s-sharding-capability">Redshift’s Sharding Capability</h3>

<p>An Amazon Redshift cluster consists of one leader node, and several compute nodes.</p>

<p>The leader node handles the compilation and distribution of queries as well as the aggregation of intermediate results.</p>

<p>Unlike MongoDB’s router servers, the leader node is consistent and can’t be scaled horizontally.</p>

<p>While this creates a bottleneck, it also allows efficient caching of compiled execution plans for popular queries.</p>

<h2 id="aggregating">Aggregating</h2>

<h3 id="elasticsearch-s-aggregating-capability">Elasticsearch’s Aggregating Capability</h3>

<p>Documents within Elasticsearch can be bucketed by exact, ranged, or even temporal and geolocation values.</p>

<p>These buckets can be further grouped into finer granularity through nested aggregation.</p>

<p>Metrics, including means and standard deviations, can be calculated for each layer, which provides the ability to calculate a hierarchy of analyses within a single query.</p>

<p>Being a document-based storage, it does suffer the limitation of intra-document field comparisons.</p>

<p>For example, while it is good at filtering if a field followers is greater than 10, we cannot check if followers is greater than another field following.</p>

<p>As an alternative, we can inject scripts as custom predicates. This feature is great for one-off analysis, but performance suffers in production.</p>

<h3 id="mongodb-s-aggregating-capability">MongoDB’s Aggregating Capability</h3>

<p>The <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline" target=_>Aggregation Pipeline</a> is powerful and fast. As its name suggests, it operates on returned data in a stage-wise fashion. Each step can filter, aggregate and transform the documents, introduce new metrics, or unwind previously aggregated groups.</p>

<p>Because these operations are done in a stage-wise manner, and by ensuring documents and fields are reduced to only filtered, the memory cost can be minimized. Compared to Elasticsearch, and even Redshift, Aggregation Pipeline is an extremely flexible way to view the data. Despite its adaptability, MongoDB suffers the same lack of intra-document field comparison as Elasticsearch. Furthermore, some operations, including <code>$group</code>, require the results to be passed to the master node. Thus, they do not leverage the distributed computing.</p>

<p>Those unfamiliar with the stage-wise pipeline calculation will find certain tasks unintuitive. For example, summing up the number of elements in an array field would require two steps: first, the <code>$unwind</code>, and then the <code>$group</code> operation.</p>

<h3 id="redshift-s-aggregating-capability">Redshift’s Aggregating Capability</h3>

<p>The benefits of Amazon Redshift cannot be understated.</p>

<p>Frustratingly slow aggregations on MongoDB while analyzing mobile traffic is quickly solved by Amazon Redshift.</p>

<p>Supporting SQL, traditional database engineers will have an easy time migrating their queries to Redshift.</p>

<p>Onboarding time aside, SQL is a proven, scalable, and powerful query language, supporting intra-document/row field comparisons with ease. Amazon Redshift further improves its performance by compiling and caching popular queries executed on the compute nodes.</p>

<p>As a relational database, Amazon Redshift does not have the schema flexibility that MongoDB and Elasticsearch have. Optimized for read operations, it suffers performance hits during updates and deletes.</p>

<p>To maintain the best read time, the rows must be sorted, adding extra operational efforts.</p>

<p>Tailored to those with petabyte-sized problems, it is not cheap and likely not worth the investment unless there are scaling problems with other databases.</p>

<h2 id="picking-the-winner">Picking the Winner</h2>

<p>In this article, we examined three different technologies – Elasticsearch, MongoDB, and Amazon Redshift – within the context of data engineering. However, there is no clear winner as each of these technologies is a front-runner in its storage type category.</p>

<p>For data engineering, depending on the use case, some options are better than others.</p>

<ul>
<li><b>MongoDB</b> is a fantastic starter database. It provides the flexibility we want when data schema is still to be determined. That said, MongoDB does not outperform specific use cases that other databases specialize in.</li>
<li>While <b>Elasticsearch</b> offers a similar fluid schema to MongoDB, it is optimized for multiple indices and text queries at the expense of write performance and storage size. Thus, we should consider migrating to Elasticsearch when we find ourselves maintaining numerous indices in MongoDB.</li>
<li><b>Redshift</b> requires a predefined data schema, and is lacking the adaptability that MongoDB provides. In return, it outclasses other databases for queries only involving single (or a few) columns. When the budget permits, Amazon Redshift is a great secret weapon when others cannot handle the data quantity.</li>
</ul>

<hr>

<p><h4>About the Author - Ken Hu</h4><a name="ken_hu"></a></p>

<p>Ken is a data and machine learning engineer. He has professional experiences in data pipelines, microservices, search engines, natural language processing, data analytics, and artificial intelligence. Python is his primary language. Ken often works in small to medium teams, acquiring an intuition to maximize efficiency with lower operation costs.</p>

<p><a href="https://www.toptal.com/data-science/data-engineering-guide-to-storages" class="btn" target="_blank">View original article</a><br><br class="custom"></p>

    <div>
  <hr>
  <h5>About Me</h5>
  <p>I'm a data engineering manager working to advance data-driven cultures by wrangling disparate data sources and
    empowering end users to uncover key insights that tell a bigger story. <a href="https://andrewrgoss.com/about">LEARN MORE
      >></a></p>
  <hr>
</div>
	<div id="social-bar">
    <ul class="rrssb-buttons clearfix">
        <li class="email">
            <a href="mailto:?subject=A%20Data%20Engineer%27s%20Guide%20To%20Non-Traditional%20Data%20Storages&amp;body=https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/" data-proofer-ignore>
                <span class="icon">
                    <svg version="1.1" id="btn-mail" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px"
                        viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <path transform="scale(0.014,-0.014) translate(0,-1670)"
                            d="M1792 826v-794q0 -66 -47 -113t-113 -47h-1472q-66 0 -113 47t-47 113v794q44 -49 101 -87q362 -246 497 -345q57 -42 92.5 -65.5t94.5 -48t110 -24.5h1h1q51 0 110 24.5t94.5 48t92.5 65.5q170 123 498 345q57 39 100 87zM1792 1120q0 -79 -49 -151t-122 -123 q-376 -261 -468 -325q-10 -7 -42.5 -30.5t-54 -38t-52 -32.5t-57.5 -27t-50 -9h-1h-1q-23 0 -50 9t-57.5 27t-52 32.5t-54 38t-42.5 30.5q-91 64 -262 182.5t-205 142.5q-62 42 -117 115.5t-55 136.5q0 78 41.5 130t118.5 52h1472q65 0 112.5 -47t47.5 -113z" />
                    </svg>
                </span>
                <span class="text">Email</span>
            </a>
        </li>
        <li class="linkedin">
            <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/&amp;title=A%20Data%20Engineer%27s%20Guide%20To%20Non-Traditional%20Data%20Storages&amp;summary=For%20data%20engineers%2c%20the%20most%20important%20aspects%20of%20data%20storages%20are%20how%20they%20index%2c%20shard%2c%20and%20aggregate%20data.%0a%20This%20post%20originally%20appeared%20on%20Toptal%20and%20was%20written%20by%20Ken%20Hu.%0aData%20Engineering%20With%20the%20rise%20of%20big%20data%20and%20data%20science%2c%20many%20engineering%20roles%20are%20being%20challenged%20and%20expanded.%20One%20new-age%20role%20is%20data%20engineering.%0aOriginally%2c%20the%20purpose%20of%20data%20engineering%20was%20the%20loading%20of%20external%20data%20sources%20and%20the%20designing%20of%20databases%20%28designing%20and%20developing%20pipelines%20to%20collect%2c%20manipulate%2c%20store%2c%20and%20analyze%20data%29...."
                class="popup">
                <span class="icon">
                    <svg version="1.1" id="btn-li" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px"
                        viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <path
                            d="M25.424,15.887v8.447h-4.896v-7.882c0-1.979-0.709-3.331-2.48-3.331c-1.354,0-2.158,0.911-2.514,1.803 c-0.129,0.315-0.162,0.753-0.162,1.194v8.216h-4.899c0,0,0.066-13.349,0-14.731h4.899v2.088c-0.01,0.016-0.023,0.032-0.033,0.048 h0.033V11.69c0.65-1.002,1.812-2.435,4.414-2.435C23.008,9.254,25.424,11.361,25.424,15.887z M5.348,2.501 c-1.676,0-2.772,1.092-2.772,2.539c0,1.421,1.066,2.538,2.717,2.546h0.032c1.709,0,2.771-1.132,2.771-2.546 C8.054,3.593,7.019,2.501,5.343,2.501H5.348z M2.867,24.334h4.897V9.603H2.867V24.334z" />
                    </svg>
                </span>
                <span class="text">LinkedIn</span>
            </a>
        </li>
        <li class="reddit">
            <a href="http://www.reddit.com/submit?url=https://andrewrgoss.com/2018/a-data-engineers-guide-to-non-traditional-data-storages/">
                <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28"
                        xml:space="preserve">
                        <g>
                            <path
                                d="M11.794 15.316c0-1.029-0.835-1.895-1.866-1.895c-1.03 0-1.893 0.865-1.893 1.895s0.863 1.9 1.9 1.9 C10.958 17.2 11.8 16.3 11.8 15.316z" />
                            <path
                                d="M18.1 13.422c-1.029 0-1.895 0.864-1.895 1.895c0 1 0.9 1.9 1.9 1.865c1.031 0 1.869-0.836 1.869-1.865 C19.969 14.3 19.1 13.4 18.1 13.422z" />
                            <path
                                d="M17.527 19.791c-0.678 0.678-1.826 1.006-3.514 1.006c-0.004 0-0.009 0-0.014 0c-0.004 0-0.01 0-0.015 0 c-1.686 0-2.834-0.328-3.51-1.005c-0.264-0.265-0.693-0.265-0.958 0c-0.264 0.265-0.264 0.7 0 1 c0.943 0.9 2.4 1.4 4.5 1.402c0.005 0 0 0 0 0c0.005 0 0 0 0 0c2.066 0 3.527-0.459 4.47-1.402 c0.265-0.264 0.265-0.693 0.002-0.958C18.221 19.5 17.8 19.5 17.5 19.791z" />
                            <path
                                d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237c-0.793 0-1.518 0.287-2.082 0.761c-2.039-1.295-4.646-2.069-7.438-2.219 l1.483-4.691l4.062 0.956c0.071 1.4 1.3 2.6 2.7 2.555c1.488 0 2.695-1.208 2.695-2.695C25.881 3.2 24.7 2 23.2 2 c-1.059 0-1.979 0.616-2.42 1.508l-4.633-1.091c-0.344-0.081-0.693 0.118-0.803 0.455l-1.793 5.7 C10.548 8.6 7.7 9.4 5.6 10.75C5.006 10.3 4.3 10 3.5 10.029c-1.785 0-3.237 1.452-3.237 3.2 c0 1.1 0.6 2.1 1.4 2.69c-0.04 0.272-0.061 0.551-0.061 0.831c0 2.3 1.3 4.4 3.7 5.9 c2.299 1.5 5.3 2.3 8.6 2.325c3.228 0 6.271-0.825 8.571-2.325c2.387-1.56 3.7-3.66 3.7-5.917 c0-0.26-0.016-0.514-0.051-0.768C27.088 15.5 27.7 14.4 27.7 13.267z M23.186 3.355c0.74 0 1.3 0.6 1.3 1.3 c0 0.738-0.6 1.34-1.34 1.34s-1.342-0.602-1.342-1.34C21.844 4 22.4 3.4 23.2 3.355z M1.648 13.3 c0-1.038 0.844-1.882 1.882-1.882c0.31 0 0.6 0.1 0.9 0.209c-1.049 0.868-1.813 1.861-2.26 2.9 C1.832 14.2 1.6 13.8 1.6 13.267z M21.773 21.57c-2.082 1.357-4.863 2.105-7.831 2.105c-2.967 0-5.747-0.748-7.828-2.105 c-1.991-1.301-3.088-3-3.088-4.782c0-1.784 1.097-3.484 3.088-4.784c2.081-1.358 4.861-2.106 7.828-2.106 c2.967 0 5.7 0.7 7.8 2.106c1.99 1.3 3.1 3 3.1 4.784C24.859 18.6 23.8 20.3 21.8 21.57z M25.787 14.6 c-0.432-1.084-1.191-2.095-2.244-2.977c0.273-0.156 0.59-0.245 0.928-0.245c1.035 0 1.9 0.8 1.9 1.9 C26.354 13.8 26.1 14.3 25.8 14.605z" />
                        </g>
                    </svg>
                </span>
                <span class="text">Reddit</span>
            </a>
        </li>
    </ul>
</div>
<br>
	<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'andrewrgoss';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>  

</main>
<footer id="footer">
  <p id="footer-message">&copy; 2024 Andrew Goss. Source code available on <a href="https://github.com/andrewrgoss/andrewrgoss.github.io" target="_blank">GitHub</a>.</p>
</footer>

<script>
  (function(c,f){asyncLoader=function(i,h){i.foreach(function(k,j){e(j,d(j),h)});if(typeof h.callback=="function"){var g=setInterval(function(){if(f.readyState==="complete"){clearInterval(g);h.callback()}},10)}};var d=function(g){var h=g.split(".");return h[h.length-1]},e=function(h,i,g){switch(i){case"js":a(h,g);break;case"css":b(h);break;default:break}},a=function(i,h){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=i;document.getElementsByTagName("head")[0].appendChild(g)},b=function(g){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;document.getElementsByTagName("head")[0].appendChild(h)};Array.prototype.foreach=function(h){for(var g=0;g<this.length;g++){h(g,this[g])}}})(this,document);

  var WebFontConfig={google:{families:["Lato:300italic,700italic,300,400,700","Oswald","PT Sans:400,700"]}};
  asyncLoader([
    "//netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.css",
    "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
    "//cdnjs.cloudflare.com/ajax/libs/webfont/1.5.16/webfontloader.js",
    "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"
  ],{
    callback:function(){
      asyncLoader([
        "https:\/\/andrewrgoss.com\/css/rrssb.css",
        "https:\/\/andrewrgoss.com\/js/gist.min.js",
        "https:\/\/andrewrgoss.com\/js/rrssb.min.js",
        "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css"
      ], { callback:function() {
          hljs.initHighlighting();
          
          
          var isMobile = window.matchMedia("only screen and (max-width: 800px)");
          if(isMobile.matches) {
            $("html, body").animate({scrollTop: $('#content').offset().top }, 500);
          }
          
        }});
    }
  });

  (function() {
    var cx = '015311007794530062324:gdnctheuf28';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

</script>

</body>
</html>